{"version":3,"sources":["../../src/plugins/memberships.js"],"names":[],"mappings":";;;;;;AAMA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAM,cAAc,uBAAY,MAAZ,CAAmB;;;;;;;;;;;;;;;AAcrC,QAdqC,kBAc9B,UAd8B,EAclB;AACjB,WAAO,KAAK,OAAL,CAAa;AAClB,oBADkB;AAElB,WAAQ,KAAK,MAAL,CAAY,eAApB,iBAFkB;AAGlB,YAAM;AAHY,KAAb,EAKJ,IALI,CAKC,UAAC,GAAD;AAAA,aAAS,IAAI,IAAb;AAAA,KALD,CAAP;AAMD,GArBoC;;;;;;;;;;;;;;AAkCrC,KAlCqC,eAkCjC,UAlCiC,EAkCrB;AACd,QAAM,KAAK,WAAW,EAAX,IAAiB,UAA5B;AACA,WAAO,KAAK,OAAL,CAAa;AAClB,WAAQ,KAAK,MAAL,CAAY,eAApB,qBAAmD;AADjC,KAAb,EAGJ,IAHI,CAGC,UAAC,GAAD;AAAA,aAAS,IAAI,IAAJ,CAAS,KAAT,IAAkB,IAAI,IAA/B;AAAA,KAHD,CAAP;AAID,GAxCoC;;;;;;;;;;;;;;;;;;;;;AA4DrC,MA5DqC,gBA4DhC,OA5DgC,EA4DvB;AAAA;;AACZ,WAAO,KAAK,OAAL,CAAa;AAClB,WAAQ,KAAK,MAAL,CAAY,eAApB,iBADkB;AAElB,UAAI;AAFc,KAAb,EAIJ,IAJI,CAIC,UAAC,GAAD;AAAA,aAAS,mBAAS,GAAT,EAAc,MAAK,KAAnB,CAAT;AAAA,KAJD,CAAP;AAKD,GAlEoC;;;;;;;;;;;;;;AA+ErC,QA/EqC,kBA+E9B,UA/E8B,EA+ElB;AACjB,QAAM,KAAK,WAAW,EAAX,IAAiB,UAA5B;;AAEA,WAAO,KAAK,OAAL,CAAa;AAClB,sBADkB;AAElB,WAAQ,KAAK,MAAL,CAAY,eAApB,qBAAmD;AAFjC,KAAb,EAIJ,IAJI,CAIC,UAAC,GAAD,EAAS;;;AAGb,UAAI,IAAI,UAAJ,KAAmB,GAAvB,EAA4B;AAC1B,eAAO,SAAP;AACD;AACD,aAAO,IAAI,IAAX;AACD,KAXI,CAAP;AAYD,GA9FoC;;;;;;;;;;;;;;AA2GrC,QA3GqC,kBA2G9B,UA3G8B,EA2GlB;AACjB,QAAM,KAAK,WAAW,EAAX,IAAiB,UAA5B;AACA,WAAO,KAAK,OAAL,CAAa;AAClB,mBADkB;AAElB,WAAQ,KAAK,MAAL,CAAY,eAApB,qBAAmD,EAFjC;AAGlB,YAAM;AAHY,KAAb,EAKJ,IALI,CAKC,UAAC,GAAD;AAAA,aAAS,IAAI,IAAb;AAAA,KALD,CAAP;AAMD;AAnHoC,CAAnB,CAApB;;kBAsHe,W","file":"memberships.js","sourcesContent":["/**!\n *\n * Copyright (c) 2015-2016 Cisco Systems, Inc. See LICENSE file.\n * @private\n */\n\nimport Page from '../lib/page';\nimport {SparkPlugin} from '@ciscospark/spark-core';\n\n/**\n * @typedef {Object} Types~Membership\n * @property {uuid} id - Unique identifier for the membership\n * @property {string} roomId - The room ID\n * @property {uuid} personId - The person ID\n * @property {email} personEmail - The email address of the person / room member\n * @property {boolean} isModerator - Indicates whether the specified person should be a room moderator.\n * @property {boolean} isMonitor - Indicates whether the specified member is a room monitor.\n * @property {isoDate} created - The date and time that this membership was created.\n */\n\n/**\n * @class\n * @extends SparkPlugin\n */\nconst Memberships = SparkPlugin.extend({\n  /**\n   * Adds a person to a room. The person can be added by ID (personId) or by\n   * Email Address (personEmail). The person can be optionally added to the room\n   * as a moderator.\n   * @instance\n   * @memberof Memberships\n   * @param {Types~Membership} membership\n   * @returns {Promise<Types~Membership>}\n   * @example\n   * <%= memberships__create_es6 %>\n   * @example\n   * <%= memberships__create %>\n   */\n  create(membership) {\n    return this.request({\n      method: `POST`,\n      uri: `${this.config.hydraServiceUrl}/memberships`,\n      body: membership\n    })\n      .then((res) => res.body);\n  },\n\n  /**\n   * Returns a single membership.\n   * @instance\n   * @memberof Memberships\n   * @param {Types~Membership|uuid} membership\n   * @returns {Promise<Types~Membership>}\n   * @example\n   * <%= memberships__get_es6 %>\n   * @example\n   * <%= memberships__get %>\n   */\n  get(membership) {\n    const id = membership.id || membership;\n    return this.request({\n      uri: `${this.config.hydraServiceUrl}/memberships/${id}`\n    })\n      .then((res) => res.body.items || res.body);\n  },\n\n  /**\n   * Returns a list of memberships. In most cases the results will only contain\n   * rooms that the authentiated user is a member of. You can filter the results\n   * by room to list people in a room or by person to find rooms that a\n   * specific person is a member of.\n   * @instance\n   * @memberof Memberships\n   * @param {Object} options\n   * @param {string} options.personId\n   * @param {string} options.personEmail\n   * @param {string} options.roomId\n   * @param {number} options.max\n   * @returns {Promise<Page<Types~Membership>>}\n   * @example\n   * <%= memberships__list_es6 %>\n   * @example\n   * <%= memberships__list %>\n   */\n  list(options) {\n    return this.request({\n      uri: `${this.config.hydraServiceUrl}/memberships`,\n      qs: options\n    })\n      .then((res) => new Page(res, this.spark));\n  },\n\n  /**\n   * Deletes a single membership.\n   * @instance\n   * @memberof Memberships\n   * @param {Types~Membership|uuid} membership\n   * @returns {Promise}\n   * @example\n   * <%= memberships__remove_es6 %>\n   * @example\n   * <%= memberships__remove %>\n   */\n  remove(membership) {\n    const id = membership.id || membership;\n\n    return this.request({\n      method: `DELETE`,\n      uri: `${this.config.hydraServiceUrl}/memberships/${id}`\n    })\n      .then((res) => {\n        // Firefox has some issues with 204s and/or DELETE. This should move to\n        // http-core\n        if (res.statusCode === 204) {\n          return undefined;\n        }\n        return res.body;\n      });\n  },\n\n  /**\n   * Used to update a single membership's properties\n   * @instance\n   * @memberof Memberships\n   * @param {Types~Membership|uuid} membership\n   * @returns {Promise<Types~Membership>}\n   * @example\n   * <%= memberships__update_es6 %>\n   * @example\n   * <%= memberships__update %>\n   */\n  update(membership) {\n    const id = membership.id || membership;\n    return this.request({\n      method: `PUT`,\n      uri: `${this.config.hydraServiceUrl}/memberships/${id}`,\n      body: membership\n    })\n      .then((res) => res.body);\n  }\n});\n\nexport default Memberships;\n"]}